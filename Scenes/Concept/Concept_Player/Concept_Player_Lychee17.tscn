[gd_scene load_steps=27 format=3 uid="uid://ctsf2h50qnqt8"]

[ext_resource type="Texture2D" uid="uid://c2u4sk4os7ehx" path="res://Assets/Concept/Spirit Boxer/Idle.png" id="1_8060v"]
[ext_resource type="Texture2D" uid="uid://bkjd7qpyvscni" path="res://Assets/Concept/Spirit Boxer/attack 3.png" id="1_n5wxs"]
[ext_resource type="Texture2D" uid="uid://b6yy43xyo0hd7" path="res://Assets/Concept/Spirit Boxer/Run.png" id="2_n5wxs"]

[sub_resource type="GDScript" id="GDScript_6ncxw"]
script/source = "extends CharacterBody2D

#normal
var State = 0
var Attacking_state = false

#exports
@export var speed: float = 200.0
@export var smoothing: float = 8.0   # Larger = snappier, smaller = smoother

#References
@onready var charactor_sprite: AnimatedSprite2D = $Charactor_sprite

func _physics_process(delta: float) -> void:
	# 1. Read input
	var input_dir := Vector2.ZERO
	if Input.is_action_pressed(\"Right\"):
		input_dir.x += 1
		State = 1
	if Input.is_action_pressed(\"Left\"):
		input_dir.x -= 1
		State = 1
	if Input.is_action_pressed(\"Backward\"):
		input_dir.y += 1 
		State = 1
	if Input.is_action_pressed(\"Forward\"):
		input_dir.y -= 1
		State = 1
	
	#WHEN CARACTOR FULLLY STOPPED
	if velocity.length() < 1.0:
		State = 0
	
	
	#Animations of player
	if !Attacking_state:
		if State == 0:
			if charactor_sprite.animation != \"Idle\":
				charactor_sprite.play(\"Idle\")
		elif State == 1:
			if charactor_sprite.animation != \"Walk\":
				charactor_sprite.play(\"Walk\")
	
	
	# 2. Determine target velocity without ternary
	var target_velocity: Vector2
	if input_dir == Vector2.ZERO:
		target_velocity = Vector2.ZERO
	else:
		target_velocity = input_dir.normalized() * speed

	if velocity.x > 0.1:
		charactor_sprite.flip_h = false
	elif velocity.x < -0.1:
		charactor_sprite.flip_h = true

	# 3. Smooth current velocity toward target
	velocity = velocity.lerp(target_velocity, smoothing * delta)

	# 4. Move with collisions
	move_and_slide()
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8060v"]
size = Vector2(24, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_05ak4"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 0, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_5usfw"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 44, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_y7swh"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 88, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_gk2fr"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 132, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_rlcvt"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 176, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_mny85"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 220, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_vtolq"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 264, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_jx3ym"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 308, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_y8u3y"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 352, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_0vr5l"]
atlas = ExtResource("1_n5wxs")
region = Rect2(0, 396, 137, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_vaw5h"]
atlas = ExtResource("1_8060v")
region = Rect2(0, 0, 34, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_escwj"]
atlas = ExtResource("1_8060v")
region = Rect2(0, 44, 34, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_gptk4"]
atlas = ExtResource("1_8060v")
region = Rect2(0, 88, 34, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_ahuhl"]
atlas = ExtResource("1_8060v")
region = Rect2(0, 132, 34, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_tumic"]
atlas = ExtResource("2_n5wxs")
region = Rect2(1, 0, 27, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_161sj"]
atlas = ExtResource("2_n5wxs")
region = Rect2(1, 44, 27, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_duvdj"]
atlas = ExtResource("2_n5wxs")
region = Rect2(1, 88, 27, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_84yfb"]
atlas = ExtResource("2_n5wxs")
region = Rect2(1, 132, 27, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_sgync"]
atlas = ExtResource("2_n5wxs")
region = Rect2(1, 176, 27, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_2hf78"]
atlas = ExtResource("2_n5wxs")
region = Rect2(1, 220, 27, 44)

[sub_resource type="SpriteFrames" id="SpriteFrames_05ak4"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_05ak4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5usfw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y7swh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gk2fr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rlcvt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mny85")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vtolq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jx3ym")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y8u3y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0vr5l")
}],
"loop": true,
"name": &"Attack",
"speed": 7.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_vaw5h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_escwj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gptk4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ahuhl")
}],
"loop": true,
"name": &"Idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_tumic")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_161sj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_duvdj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_84yfb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sgync")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2hf78")
}],
"loop": true,
"name": &"Walk",
"speed": 7.0
}, {
"frames": [],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="ConceptPlayer" type="CharacterBody2D"]
script = SubResource("GDScript_6ncxw")

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(1.5, 1.5)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -0.5)
shape = SubResource("RectangleShape2D_8060v")

[node name="Charactor_sprite" type="AnimatedSprite2D" parent="."]
position = Vector2(0, -4)
sprite_frames = SubResource("SpriteFrames_05ak4")
animation = &"Attack"
frame_progress = 0.107893
